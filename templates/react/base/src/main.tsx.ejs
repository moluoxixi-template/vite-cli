/**
 * 应用入口文件 - 标准模式
 * 初始化 React 应用并挂载到 DOM
 */

import React from 'react'
import ReactDOM from 'react-dom/client'
<% if (hasRouter) { -%>
import { RouterProvider } from 'react-router-dom'
import { createRouter } from '@/router'
<% } else { -%>
import App from './App'
<% } -%>
<% if (i18n) { -%>
import '@/locales'
<% } -%>
<% if (sentry) { -%>
import { initSentry } from '@/utils/sentry'
<% } -%>

// 导入样式文件
<% if (uiLibrary === 'ant-design') { -%>
import 'antd/dist/reset.css'
<% } -%>
import '@/assets/styles/main.scss'
import '@/assets/fonts/index.css'

<% if (sentry) { -%>
// 初始化 Sentry
initSentry({
  dsn: import.meta.env.VITE_SENTRY_DSN,
  environment: import.meta.env.MODE,
})

<% } -%>
/**
 * 初始化并渲染应用
 */
function initApp(): void {
<% if (hasRouter) { -%>
  const router = createRouter()
<% } -%>
  const root = ReactDOM.createRoot(document.getElementById('root')!)
  
  root.render(
    <React.StrictMode>
<% if (hasRouter) { -%>
      <RouterProvider router={router} />
<% } else { -%>
      <App />
<% } -%>
    </React.StrictMode>,
  )
}

initApp()
